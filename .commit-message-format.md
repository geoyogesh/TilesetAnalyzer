# Commit Message Format

This project uses [Conventional Commits](https://www.conventionalcommits.org/) format for commit messages.

## Format

```
<type>(scope): <subject>

<body>

<footer>
```

**Note:** Scope is required (not optional)

### Type (Required)

Must be one of:

- **feat**: A new feature
- **fix**: A bug fix
- **docs**: Documentation only changes
- **style**: Changes that don't affect code meaning (formatting, whitespace)
- **refactor**: Code change that neither fixes a bug nor adds a feature
- **perf**: Performance improvement
- **test**: Adding or updating tests
- **chore**: Maintenance tasks (dependencies, configs)
- **ci**: CI/CD configuration changes
- **build**: Build system or external dependencies

### Scope (Required)

The scope is **required** and should be the name of the affected component:

- `api` - Backend API changes
- `ui` - Frontend/React changes
- `cli` - Command-line interface
- `docs` - Documentation
- `ci` - CI/CD configuration
- `tooling` - Development tools (linters, formatters, etc.)
- `deps` - Dependency updates
- `build` - Build system

### Subject (Required)

- Use imperative, present tense: "change" not "changed" nor "changes"
- Don't capitalize first letter
- No period (.) at the end
- Maximum 72 characters

## Examples

### Good Examples

```bash
feat(api): add support for PMTiles format
fix(ui): correct map zoom behavior on mobile
docs(readme): update installation instructions
style(tooling): format code with black
refactor(cli): simplify argument parsing
test(api): add tests for tile serving
chore(deps): update dependencies to latest versions
feat(ci): add code quality checks to pipeline
```

### Bad Examples

```bash
❌ Added new feature                    # No type
❌ fix: Fixed the bug.                  # No scope, wrong tense, period at end
❌ FEAT: new feature                    # Capitalized type, no scope
❌ feat: Added support for PMTiles.     # No scope, wrong tense, period at end
❌ feat(API): add feature               # Capitalized scope
```

## Using Commitizen (Interactive)

For easier commit message creation, use commitizen:

```bash
# Stage your changes
git add .

# Use commitizen to create commit
cz commit

# Or use the shorthand
cz c
```

This will guide you through creating a properly formatted commit message.

## Validation

Commit messages are automatically validated by pre-commit hooks. Invalid messages will be rejected:

```bash
$ git commit -m "wrong message"
commitizen check.........................................................Failed
- hook id: commitizen
- exit code: 1

commit validation: failed!
please enter a commit message in the commitizen format.
```

## Breaking Changes

Breaking changes cause a **MAJOR** version bump (e.g., 1.2.3 → 2.0.0).

There are **two ways** to indicate a breaking change:

### Option 1: Add `!` after type/scope

```bash
feat!: drop support for Python 3.9
feat(api)!: change tile endpoint response format
fix(cli)!: remove deprecated --legacy flag
```

### Option 2: Add `BREAKING CHANGE:` footer

```bash
feat(api): change tile endpoint response format

The tile endpoint now returns JSON instead of binary for better
client compatibility.

BREAKING CHANGE: API response format changed from binary to JSON
```

### Both methods together (recommended for clarity)

```bash
feat(api)!: change tile endpoint response format

BREAKING CHANGE: The tile endpoint now returns JSON instead of binary.
Clients must update their parsers to handle JSON responses.
```

**When to use which:**

- Use `!` alone for obvious breaking changes
- Use `BREAKING CHANGE:` footer for complex changes that need explanation
- Use **both** when you want the `!` flag AND detailed explanation

## Related Issues

Link to issues in the footer:

```bash
fix(ui): correct layer rendering bug

Fixes #123
```

## Multiple Changes

Commit atomic changes separately. Don't mix features, fixes, and refactoring in one commit.

## Important Notes

**Do NOT include:**

- ❌ LLM/AI signatures (e.g., "Generated with Claude Code")
- ❌ Co-authored-by tags for AI assistants
- ❌ Automated tool signatures

Commits should only contain human-written content and be attributed to actual developers.

## Resources

- [Conventional Commits](https://www.conventionalcommits.org/)
- [Commitizen](https://commitizen-tools.github.io/commitizen/)
- [Semantic Versioning](https://semver.org/)
